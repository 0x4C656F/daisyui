.tabs {
  @apply inline-grid items-end align-bottom;
}

.tab {
  @apply hover:text-base-content relative row-start-1 inline-flex h-8 cursor-pointer select-none appearance-none flex-wrap items-center justify-center text-center text-sm leading-loose text-base-content/50;
  --tab-padding: 1rem;
  --tab-color: theme(colors.base-content);
  --tab-bg: theme(colors.base-100);
  --tab-border-color: theme(colors.base-300);
  color: var(--tab-color);
  padding-inline-start: var(--tab-padding, 1rem);
  padding-inline-end: var(--tab-padding, 1rem);

  &:is(input[type="radio"]) {
    @apply w-auto rounded-b-none;

    &:after {
      --tw-content: attr(aria-label);
      content: var(--tw-content);
    }
  }

  &:checked,
  &:is(.tab-active, [aria-selected="true"]) {
    &+.tab-content {
      @apply block;
    }
  }

  &:not(input):empty {
    @apply cursor-default;
    grid-column-start: span 9999;
  }

  &:is(.tab-active, [aria-selected="true"]):not(.tab-disabled):not([disabled]),
  &:is(input:checked) {
    @apply border-base-content;
  }

  &:focus {
    @apply outline-none;
  }

  &:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: -5px;
  }

  /* disabled */
  &-disabled,
  &[disabled] {
    @apply text-base-content/20 cursor-not-allowed;
  }


  &[disabled],
  &[disabled]:hover {
    @apply text-base-content/29 cursor-not-allowed;
  }
}

.tabs-bordered {
  &>.tab {
    @apply border-base-content/20;
    border-style: solid;
    border-width: 0;
    border-bottom-width: calc(var(--spacing-tab-border, 1px) + 1px);
  }
}

.tabs-lifted {
  &>.tab:focus-visible {
    border-end-end-radius: 0;
    border-end-start-radius: 0;
  }

  &:has(.tab-content[class^="rounded-"]) .tab:first-child:not(:is(.tab-active, [aria-selected="true"])),
  &:has(.tab-content[class*=" rounded-"]) .tab:first-child:not(:is(.tab-active, [aria-selected="true"])) {
    @apply border-b-transparent;
  }

  &>.tab {
    border: var(--spacing-tab-border, 1px) solid transparent;
    border-width: 0 0 var(--spacing-tab-border, 1px) 0;
    border-start-start-radius: var(--tab-radius, 0.5rem);
    border-start-end-radius: var(--tab-radius, 0.5rem);
    border-bottom-color: var(--tab-border-color);
    padding-inline-start: var(--tab-padding, 1rem);
    padding-inline-end: var(--tab-padding, 1rem);
    padding-top: var(--spacing-tab-border, 1px);

    &:is(.tab-active, [aria-selected="true"]):not(.tab-disabled):not([disabled]),
    &:is(input:checked) {
      background-color: var(--tab-bg);
      border-width: var(--spacing-tab-border, 1px) var(--spacing-tab-border, 1px) 0 var(--spacing-tab-border, 1px);
      border-inline-start-color: var(--tab-border-color);
      border-inline-end-color: var(--tab-border-color);
      border-top-color: var(--tab-border-color);
      padding-inline-start: calc(var(--tab-padding, 1rem) - var(--spacing-tab-border, 1px));
      padding-inline-end: calc(var(--tab-padding, 1rem) - var(--spacing-tab-border, 1px));
      padding-bottom: var(--spacing-tab-border, 1px);
      padding-top: 0;

      &:before {
        z-index: 1;
        content: "";
        display: block;
        position: absolute;
        width: calc(100% + var(--tab-radius, 0.5rem) * 2);
        height: var(--tab-radius, 0.5rem);
        bottom: 0;
        background-size: var(--tab-radius, 0.5rem);
        background-position:
          top left,
          top right;
        background-repeat: no-repeat;
        --tab-grad: calc(69% - var(--spacing-tab-border, 1px));
        --radius-start: radial-gradient(circle at top left,
            transparent var(--tab-grad),
            var(--tab-border-color) calc(var(--tab-grad) + 0.25px),
            var(--tab-border-color) calc(var(--tab-grad) + var(--spacing-tab-border, 1px)),
            var(--tab-bg) calc(var(--tab-grad) + var(--spacing-tab-border, 1px) + 0.25px));
        --radius-end: radial-gradient(circle at top right,
            transparent var(--tab-grad),
            var(--tab-border-color) calc(var(--tab-grad) + 0.25px),
            var(--tab-border-color) calc(var(--tab-grad) + var(--spacing-tab-border, 1px)),
            var(--tab-bg) calc(var(--tab-grad) + var(--spacing-tab-border, 1px) + 0.25px));
        background-image: var(--radius-start), var(--radius-end);
      }

      &:first-child:before {
        background-image: var(--radius-end);
        background-position: top right;

        [dir="rtl"] & {
          background-image: var(--radius-start);
          background-position: top left;
        }
      }

      &:last-child:before {
        background-image: var(--radius-start);
        background-position: top left;

        [dir="rtl"] & {
          background-image: var(--radius-end);
          background-position: top right;
        }
      }
    }
  }
}

.tabs-lifted {

  &> :is(.tab-active, [aria-selected="true"]):not(.tab-disabled):not([disabled])+.tabs-lifted :is(.tab-active, [aria-selected="true"]):not(.tab-disabled):not([disabled]),
  &>.tab:is(input:checked)+.tabs-lifted .tab:is(input:checked) {
    &:before {
      background-image: var(--radius-end);
      background-position: top right;
    }
  }
}

.tabs-boxed {
  @apply bg-base-200 rounded-btn p-1;

  .tab {
    @apply rounded-btn;
  }

  :is(.tab-active, [aria-selected="true"]):not(.tab-disabled):not([disabled]),
  :is(input:checked) {
    @apply bg-primary text-primary-content hover:text-primary-content;
  }
}

.tab-content {
  @apply col-start-1 col-end-[span_9999] row-start-2 hidden border-transparent;
  border-width: var(--spacing-tab-border, 1px);
  margin-top: calc(var(--spacing-tab-border) * -1);
  min-width: calc(100% + 1.5rem);

  :checked+&:nth-child(2),
  :is(.tab-active, [aria-selected="true"])+&:nth-child(2) {
    @apply rounded-ss-none;
  }
}

.tabs-md {
  :where(.tab) {
    @apply h-8 text-sm leading-loose;
    --tab-padding: 1rem;
  }
}

.tabs-lg {
  :where(.tab) {
    @apply h-12 text-lg leading-loose;
    --tab-padding: 1.25rem;
  }
}

.tabs-sm {
  :where(.tab) {
    @apply h-6 text-sm leading-3;
    --tab-padding: 0.75rem;
  }
}

.tabs-xs {
  :where(.tab) {
    @apply h-5 text-xs leading-3;
    --tab-padding: 0.5rem;
  }
}
